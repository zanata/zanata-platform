<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:a4j="http://richfaces.org/a4j"
  xmlns:rich="http://richfaces.org/rich"
  template="/WEB-INF/template/template_2x.xhtml">

  <ui:define name="page_title">#{msgs['jsf.EditHomePage']}</ui:define>
  <ui:define name="center_content">
    <!-- TODO pahuang do we need this? -->
    <a4j:jsFunction name="cancelEditHomeContent" action="#{serverConfigurationBean.cancel()}" />
    <h1>#{msgs['jsf.HomepageContent']}</h1>

    <h:form id="homeContentForm">
      <s:token allowMultiplePosts="true"/>
      <div class="js-commonmark">

        <rich:panel id="loggedIn">
          <h:inputTextarea id="homeContent"
            required="false"
            value="#{serverConfigurationBean.homeContent}"
            styleClass="code_editor text-editor js-commonmark__editor"/>
          <div style="clear:both"></div>
        </rich:panel>

        <div class="actionButtons">
          <h:commandButton id="update"
            value="#{msgs['jsf.Update']}"
            action="#{serverConfigurationBean.updateHomeContent}"/>
          <h:button id="cancel" outcome="/home.xhtml"
            value="#{msgs['jsf.Cancel']}"
            onclick="cancelEditHomeContent()"/>
        </div>

        <hr/>

        <div id="home-content-preview" class="prose prose--preview js-commonmark__preview"></div>

      </div>

        <h:outputScript target="body" library="webjars" name="${commonMarkRenderer.outputScriptNameSanitizer}"/>
        <h:outputScript target="body" library="webjars" name="${commonMarkRenderer.outputScriptName}"/>
        <h:outputScript target="body" library="script" name="commonmark-preview.js"/>

    </h:form>
  </ui:define>

</ui:composition>
