<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.zanata</groupId>
        <artifactId>server</artifactId>
        <version>3.0.0-alpha-2-SNAPSHOT</version>
    </parent>
    <artifactId>zanata-model</artifactId>
    <name>Zanata model</name>
    <packaging>jar</packaging>

    <!-- Should be the same as zanata-server/pom.xml -->
    <scm>
        <connection>scm:git:git://github.com/zanata/zanata.git</connection>
        <developerConnection>scm:git:git@github.com:zanata/zanata.git</developerConnection>
        <url>https://github.com/zanata/zanata</url>
    </scm>

    <properties>
    </properties>

    <build>
        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
            </resource>
        </resources>
        <plugins>
<!--
            <plugin>
               <groupId>com.mysema.maven</groupId>
               <artifactId>apt-maven-plugin</artifactId>
               <version>1.1.0</version>
               <executions>
                 <execution>
                   <goals>
                     <goal>process</goal>
                   </goals>
                   <configuration>
                     <outputDirectory>target/generated-sources/java</outputDirectory>
                     <processor>com.mysema.query.apt.hibernate.HibernateAnnotationProcessor</processor>
                   </configuration>
                 </execution>
               </executions>
            </plugin>
-->
            <!-- basically we only want to test validators-->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <configuration>
                    <instrumentation>
                        <excludes>
                            <exclude>**/test/**/*</exclude>
                            <exclude>**/hibernate/**/*</exclude>
                            <exclude>**/util/*</exclude>
                            <exclude>**/model/po/*</exclude>
                            <exclude>**/model/security/*</exclude>
                            <exclude>**/model/type/*</exclude>
                            <exclude>**/model/*</exclude>
                        </excludes>
                    </instrumentation>
                    <check>
                        <totalBranchRate>${cobertura.total-branch-rate}</totalBranchRate>
                        <totalLineRate>${cobertura.total-line-rate}</totalLineRate>
                        <haltOnFailure>${cobertura.halt.failure}</haltOnFailure>
                    </check>
                </configuration>
            </plugin>
        </plugins>
    </build>

    <dependencies>
<!--
      <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-apt</artifactId>
        <version>3.2.0</version>
        <scope>provided</scope>
      </dependency>

      <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
        <version>3.2.0</version>
      </dependency>
-->
<!--
      <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa-codegen</artifactId>
        <version>3.2.0</version>
      </dependency>

      <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-hql</artifactId>
        <version>1.9.7</version>
      </dependency>
-->

<!--
      <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.2</version>
      </dependency>
-->


        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest-core</artifactId>
        </dependency>
        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest-library</artifactId>
        </dependency>
        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.zanata</groupId>
            <artifactId>zanata-common-api</artifactId>
            <exclusions>
            				<exclusion>
            								<artifactId>
            												javassist
            								</artifactId>
            								<groupId>javassist</groupId>
            				</exclusion>
            				<exclusion>
            								<artifactId>
            												commons-logging
            								</artifactId>
            								<groupId>
            												commons-logging
            								</groupId>
            				</exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.zanata</groupId>
            <artifactId>zanata-common-util</artifactId>
        </dependency>

        <dependency>
            <groupId>net.sf.okapi.steps</groupId>
            <artifactId>okapi-step-wordcount</artifactId>
            <!-- see latest version at http://repository-okapi.forge.cloudbees.com/snapshot/net/sf/okapi/steps/okapi-step-wordcount/ -->
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
        </dependency>


        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-core</artifactId>
            <!-- okapi-lib-search would otherwise use lucene 3.0.0 -->
            <version>${lucene.version}</version>
        </dependency>

        <dependency>
            <groupId>org.apache.lucene</groupId>
            <artifactId>lucene-analyzers</artifactId>
            <!-- okapi-lib-search would otherwise use lucene 3.0.0 -->
            <version>${lucene.version}</version>
        </dependency>

        <!-- Solr -->
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr-core</artifactId>
            <exclusions>
            				<exclusion>
            								<artifactId>
            												geronimo-stax-api_1.0_spec
            								</artifactId>
            								<groupId>
            												org.apache.geronimo.specs
            								</groupId>
            				</exclusion>
            				<exclusion>
            								<artifactId>
            												commons-io
            								</artifactId>
            								<groupId>
            												org.apache.commons
            								</groupId>
            				</exclusion>
            				<exclusion>
            								<artifactId>
            												solr-lucene-analyzers
            								</artifactId>
            								<groupId>
            												org.apache.solr
            								</groupId>
            				</exclusion>
            </exclusions>
        </dependency>

        <!-- Hibernate / JPA -->
        <dependency>
            <groupId>org.jboss.seam</groupId>
            <artifactId>jboss-seam</artifactId>
            <type>ejb</type>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-search</artifactId>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
        </dependency>

        <dependency>
            <groupId>com.ibm.icu</groupId>
            <artifactId>icu4j</artifactId>
        </dependency>

		<dependency>
			<groupId>javax.validation</groupId>
			<artifactId>validation-api</artifactId>
		</dependency>

        <dependency>
          <groupId>joda-time</groupId>
          <artifactId>joda-time</artifactId>
        </dependency>

    </dependencies>

    <profiles>
        <profile>
            <id>mysql</id>
            <properties>
                <env.dbunit.type>MYSQL</env.dbunit.type>
                <ds.jndi.name>zanataDatasource</ds.jndi.name>
                <ds.hibernate.dialect>org.zanata.ZanataMySQL5InnoDBDialect</ds.hibernate.dialect>
                <ds.driver.class>com.mysql.jdbc.Driver</ds.driver.class>
            </properties>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>hibernate3-maven-plugin</artifactId>
                        <version>2.2</version>
                        <configuration>
                            <components>
                                <component>
                                    <name>hbm2ddl</name>
                                    <implementation>jpaconfiguration</implementation>
                                </component>
                            </components>
                            <componentProperties>
                                <persistenceunit>zanataDatabase</persistenceunit>
                                <outputfilename>schema.ddl</outputfilename>
                                <drop>false</drop>
                                <create>true</create>
                                <export>false</export>
                                <format>true</format>
                            </componentProperties>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>mysql</groupId>
                                <artifactId>mysql-connector-java</artifactId>
                                <version>5.1.9</version>
                            </dependency>
                        </dependencies>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project>
