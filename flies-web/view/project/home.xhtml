<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    template="../layout/template.xhtml">

  <ui:define name="breadcrumbs">
    Â»&#xa0;Projects 
  </ui:define>

  <ui:define name="left_content">
    <rich:panel>
      <f:facet name="header">Actions</f:facet>
      <div> <s:link value="Create project" 
                    view="/project/create_project.xhtml"
                    propagation="none"/>
      </div>
      <div> <s:link value="Manage Repository" view="/project/repositorylist.xhtml"/> </div>
      <div> <s:link value="Upload PO File" view="/project/uploadfile.xhtml"/> </div>
    </rich:panel>
  </ui:define>  
  <ui:define name="center_content">
    <rich:jQuery selector="#tab_projects" query="addClass('ui-tabs-selected')" />

    <h:outputText value="No project exists"
               rendered="#{empty latestProjects}"/>

    <s:fragment rendered="#{not empty projects}">
      <h1>Latest Projects</h1>
      <ui:repeat value="#{latestProjects}" var="project" rendered="#{not empty projects}">
        <div class="project_entry">
          <h2>
            <s:link id="project"
                 value="#{project.name}"
                 propagation="none"
                 view="/project/project.xhtml">
              <f:param name="slug"
                       value="#{project.slug}"/>
            </s:link>
          </h2>
          <div class="description">
            #{project.description}
          </div>
          <div class="targets">
            <ui:repeat value="#{project.projectSeries}" var="s">
              <s:fragment rendered="#{s.name != 'default'}">#{s.name} ( </s:fragment>
              <ui:repeat value="#{s.projectTargets}" var="t">
                <span style="margin-right: 1pt; margin-left: 1pt;">
                  <s:link id="project"
                       value="#{t.name}"
                       propagation="none"
                       view="/project/target.xhtml">
                    <f:param name="mslug"
                             value="#{project.slug}/#{t.slug}"/>
                  </s:link>
                </span> 
              </ui:repeat>
              <s:fragment rendered="#{s.name != 'default'}"> ) </s:fragment>
            </ui:repeat>
          </div>
        </div>
      </ui:repeat>
    </s:fragment>
  </ui:define>

</ui:composition>
