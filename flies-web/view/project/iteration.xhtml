<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:flies="http://flies.fedorahosted.org/ui"
    template="../layout/template.xhtml"
                xmlns:a4j="http://richfaces.org/a4j">

<ui:define name="breadcrumbs">
  »
  <s:link view="/project/home.xhtml" propagation="none">Projects</s:link>
  »
  <s:link view="/project/project.xhtml" propagation="none">
    <f:param name="slug" value="#{projectIterationHome.instance.project.slug}"/>
    #{projectIterationHome.instance.project.name}
  </s:link>
  Version 1
</ui:define>

<ui:define name="left_content">
  <rich:panel>
    <f:facet name="header">Actions</f:facet>
    <s:link styleClass="action_link" view="/project/iteration_edit.xhtml" propagation="none">
      <f:param name="mslug" value="#{projectIterationHome.multiSlug}"/>
      Edit
    </s:link>
    <h:outputLink styleClass="action_link" value="#" id="link">
      Upload Project
      <rich:componentControl for="panel" attachTo="link" operation="show" event="onclick"/>
    </h:outputLink>
    
  </rich:panel>
</ui:define>

<ui:define name="center_content">
  <rich:jQuery selector="#tab_projects" query="addClass('ui-tabs-selected')" />

  <h1>#{projectIterationHome.instance.project.name} : #{projectIterationHome.instance.name}</h1>

  <p>#{projectIterationHome.instance.container.name}</p>

  <h2>Content Manager</h2>
  
  <rich:modalPanel id="panel" width="420" height="220">
    <f:facet name="header">Upload Project</f:facet>
    <p>This form allows you to upload an 
      <a href="http://openl10n.googlecode.com/">Open Localisation Project</a>
      to use as the base for your project. You can also do this via the 
      <a href="#">REST API</a>.
    </p>
    
    <h:form>
      <rich:fileUpload fileUploadListener="#{olpUpload.listener}"
          maxFilesQuantity="1"
          listHeight="80px;" 
          id="upload"
          immediateUpload="true"
          acceptedTypes="olp, zip" allowFlash="false">
      </rich:fileUpload>    
      <div class="actionButtons">
        <h:commandButton value="Cancel"  onclick="#{rich:component('panel')}.hide()"/>
      </div>
    </h:form>
  </rich:modalPanel>

  <h2>Tree</h2>
  
  <h:panelGrid columns="2" width="100%">
    <h:column>
      <rich:panel>
        <f:facet name="header">Document Tree</f:facet>
        <h:form>
          <rich:tree style="width:300px" nodeSelectListener="#{hProjectHome.processSelection}" 
              reRender="selectedNode" ajaxSubmitSelection="true"  switchType="client"
              value="#{hProjectHome.rootNode}" var="item" ajaxKeys="#{null}" 
              treeNodeVar="treeNode" nodeFace="#{hProjectHome.getNodeFace(treeNode.data)}">
            <rich:treeNode type="folder" icon="/img/iconFolder.gif" iconLeaf="/img/iconFolder.gif">  
              <h:outputText value="#{item}"/> <strong><em> <strike>fol</strike>der</em></strong>
            </rich:treeNode>        
            <rich:treeNode type="doc"> 
              <h:outputText value=" val: #{item}"/> 
            </rich:treeNode>        
          </rich:tree>
        </h:form>
      </rich:panel>
    </h:column>
    <h:column>
      <rich:panel>
        <f:facet name="header">Details</f:facet>
        <h:outputText id="selectedNode"
            escape="false" 
            value="Selected Node: #{hProjectHome.nodeTitle}"  />
      </rich:panel>
    </h:column>
  </h:panelGrid>

</ui:define>

</ui:composition>
