<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<f:view contentType="text/html" xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ds="http://deltaspike.apache.org/jsf"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:f="http://java.sun.com/jsf/core">
  <html class="no-js new-zanata Bgc(#fff) Fz(16px)!">

  <f:metadata>
    <f:event type="preRenderView" listener="#{identity.checkLoggedIn}"/>
  </f:metadata>

  <h:head>
    <ui:remove>
      <!-- This needs to appear before all other JavaScript, for accurate testing -->
    </ui:remove>
    <h:outputText value="#{javaScriptTestHelper.headScript}" escape="false" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>#{msgs['jsf.PageTitle']}</title>
    <link type="image/x-icon" rel="shortcut icon"
        href="#{request.contextPath}/resources/assets/img/logo/logo.ico" />
    <link rel="stylesheet" href="#{request.contextPath}/frontend.css" type="text/css"/>
    <link type="text/css" rel="stylesheet"
      href="#{request.contextPath}/resources/fontello/css/fontello.css"/>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/assets/css/style.css"/>
    <link type="text/css" rel="stylesheet" href="#{request.contextPath}/resources/assets/css/application.css"/>

    <script src="codemirror/codemirror-compressed-3.21.cache.js"
      type="text/javascript"></script>
    <link rel="stylesheet" type="text/css"
      href="codemirror/codemirror-3.21.cache.css"/>

    <script src="diff_match_patch/javascript/diff_match_patch.js"
      type="text/javascript"></script>

    <script src="search-field-suggestions.js" type="text/javascript"></script>

    <!--                                           -->
    <!-- This script loads your compiled module.   -->
    <!-- If you add any GWT meta tags, they must   -->
    <!-- be added before this line.                -->
    <!--                                           -->
    <script type="text/javascript" language="javascript"
      src="webtrans.nocache.js"></script>
  </h:head>

  <!--                                           -->
  <!-- The body can have arbitrary html, or      -->
  <!-- you can leave the body empty if you want  -->
  <!-- to create a completely dynamic UI.        -->
  <!--                                           -->
  <h:body styleClass="new-zanata-body">
    <ds:windowId/>
    <div id="config"
      data-app-url="#{request.contextPath}"
      data-server-url="#{request.contextPath}"
      data-api-server-url="#{request.contextPath}/rest"
      data-user="#{authenticatedAccountHome.getUser()}"
      data-permission="#{authenticatedAccountHome.getUserPermission().getJSON()}"
      data-links='{"loginUrl": "#{applicationConfigurationAction.getLoginUrl(request)}",
                   "registerUrl": "#{applicationConfigurationAction.registerUrl}"}'>
    </div>
    <script type="application/javascript">
      var zanataSessionId = '#{request.session.id}';
      window.config = JSON.parse(JSON.stringify(document.getElementById('config').dataset))
    </script>


    <div class='template-wrapper'>
      <div class='template-container'>
        <div id="root" />
        <div id="container" class="container-editor"/>
      </div>
    </div>
    <script type="text/javascript"
      src="#{request.contextPath}/frontend.legacy.min.js"></script>
    <!-- OPTIONAL: include this if you want history support -->
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1'
      style="position:absolute;width:0;height:0;border:0"></iframe>

    <ui:include src="/WEB-INF/template/scripts.xhtml"/>

  </h:body>
  </html>
</f:view>
